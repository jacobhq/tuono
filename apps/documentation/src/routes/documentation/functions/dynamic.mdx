import MetaTags from '@/components/MetaTags'

<MetaTags
  title="Tuono - Dynamic"
  canonical="https://tuono.dev/documentation/functions/dynamic"
/>

import Breadcrumbs from '@/components/Breadcrumbs'

<Breadcrumbs breadcrumbs={[{ label: 'Dynamic' }]} />

# Dynamic

Lazy loading allows you to reduce the amount of JavaScript needed for the initial page render by deferring the loading of some components and libraries until they are needed. This works best when deferring something that _isn't initially visible_, for example a component below the fold, or a component in a modal.

Tuono provides a utility function to offer support for this pattern through the `dynamic` function, which uses `Suspense` and `React.lazy` to enable lazy loading of components with support for a fallback.

## Usage

Here is an example using all the exposed options as referenced below.

```typescript jsx
import { dynamic } from 'tuono'

const LazyComponent = dynamic(() => import('./MyComponent'), {
  ssr: false,
  loading: () => <div>Loading...</div>,
})

function App() {
  return (
    <div>
      <h1>Welcome</h1>
      <LazyComponent />
    </div>
  )
}
```

As you can see, we pass the component import as a function, as well as our options object. Note that the first argument must be a function that returns a promise (e.g., `() => import('./MyComponent')`), rather than calling `import('./MyComponent')` directly, which would execute immediately instead of lazily loading.

It is good practice to ensure that your fallback component is of the same dimensions as your actual component - this prevents layout shift, and that ugly resizing of modals as their content is loaded.

## Options

The dynamic function accepts an import function and an options object:

| Name           | Type                                                                     | Default value | Description                                                                    |
| -------------- | ------------------------------------------------------------------------ | ------------- | ------------------------------------------------------------------------------ |
| `importFn`     | `() => Promise<React.ComponentType<T> \| ComponentModule<T>>` (Required) | -             | Function to import your component.                                             |
| `opts`         | `DynamicOptions`                                                         | -             | Optional config object for additional control.                                 |
| `opts.ssr`     | `boolean`                                                                | `true`        | Whether to enable server-side rendering for the component.                     |
| `opts.loading` | `React.ComponentType<unknown>`                                           | `null`        | A fallback component to show while the lazy-loaded component is being fetched. |
